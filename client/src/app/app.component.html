
<h2>Ajouter un utilisateur</h2>

<form (ngSubmit)="createNewUser()">
  <input type="text" [(ngModel)]="newUser.name" name="name" placeholder="Nom" required />
  <input type="text" [(ngModel)]="newUser.email" name="email" placeholder="Email" required />
  <input type="text" [(ngModel)]="newUser.password" name="password" placeholder="password" required />
  <button type="submit">Créer</button>
</form>

<h3>Liste des utilisateurs</h3>
<pre>{{ users | json }}</pre>
<ul>
  <li *ngFor="let user of users">
    {{ user.name }}
  </li>
</ul>

<h2>Connexion</h2>
<form (ngSubmit)="login()" #loginForm="ngForm">
  <label for="email">Email :</label>
  <input
    type="email"
    id="email"
    name="email"
    [(ngModel)]="credentials.email"
    required
  />
  <br />

  <label for="password">Mot de passe :</label>
  <input
    type="password"
    id="password"
    name="password"
    [(ngModel)]="credentials.password"
    required
  />
  <br />

  <button type="submit" [disabled]="!loginForm.form.valid">Se connecter</button>
</form>

<!-- Nouvelle section pour le logout -->
<!-- Bouton de déconnexion qui n'apparaît que si l'utilisateur est connecté -->
<button 
  *ngIf="isLoggedIn()" 
  type="button" 
  (click)="logout()" 
  class="logout-btn">
  Se déconnecter
</button>

<button type="button" (click)="testClick()">test</button>
<pre>{{ credentials | json }}</pre>

<button (click)="afficherMessage()">Cliquez-moi</button>
<p>{{ message }}</p>
